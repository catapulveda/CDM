<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="INFORME ANUAL" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="0d5dc2c6-f0be-49ba-a61a-6f7dbd9a52d9">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="CDM"/>
	<style name="COLUMNA" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.25"/>
			<leftPen lineWidth="0.25"/>
			<bottomPen lineWidth="0.25"/>
			<rightPen lineWidth="0.25"/>
		</box>
	</style>
	<style name="DETALLE" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.25"/>
			<leftPen lineWidth="0.25"/>
			<bottomPen lineWidth="0.25"/>
			<rightPen lineWidth="0.25"/>
		</box>
		<conditionalStyle>
			<conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
			<style backcolor="#EFF7FF"/>
		</conditionalStyle>
	</style>
	<subDataset name="DATOS" uuid="1ffdd677-1bd8-4497-95b8-464179f7c90a">
		<queryString>
			<![CDATA[SELECT e.op, t.numeroserie, e.fecharecepcion, p.fechalaboratorio, c.nombrecliente, 
t.fase, t.kvasalida, t.serviciosalida, e.lote FROM protocolos p
INNER JOIN transformador t USING(idtransformador)
INNER JOIN entrada e USING(identrada)
INNER JOIN cliente c USING(idcliente)
WHERE p.fechalaboratorio::date BETWEEN 'Tue Jan 03 11:05:37 COT 2016' AND 'Fri Feb 03 11:05:40 COT 2017' 
ORDER BY p.fechalaboratorio, t.numeroserie ASC]]>
		</queryString>
		<field name="op" class="java.lang.String"/>
		<field name="numeroserie" class="java.lang.String"/>
		<field name="fecharecepcion" class="java.sql.Timestamp"/>
		<field name="fechalaboratorio" class="java.sql.Timestamp"/>
		<field name="nombrecliente" class="java.lang.String"/>
		<field name="fase" class="java.lang.Integer"/>
		<field name="kvasalida" class="java.lang.Double"/>
		<field name="serviciosalida" class="java.lang.String"/>
		<field name="lote" class="java.lang.String"/>
		<variable name="TOTAL_KVA" class="java.lang.Double" resetType="Group" resetGroup="group1" calculation="Sum">
			<variableExpression><![CDATA[$F{kvasalida}]]></variableExpression>
		</variable>
		<group name="group1">
			<groupExpression><![CDATA[$F{serviciosalida}]]></groupExpression>
		</group>
	</subDataset>
	<queryString>
		<![CDATA[SELECT e.op, t.numeroserie, e.fecharecepcion, p.fechalaboratorio, c.nombrecliente, 
t.fase, t.kvasalida, t.serviciosalida, e.lote FROM protocolos p
INNER JOIN transformador t USING(idtransformador)
INNER JOIN entrada e USING(identrada)
INNER JOIN cliente c USING(idcliente)
WHERE p.fechalaboratorio::date BETWEEN 'Tue Jan 03 11:05:37 COT 2016' AND 'Fri Feb 03 11:05:40 COT 2017' 
ORDER BY t.serviciosalida, p.fechalaboratorio, t.numeroserie ASC]]>
	</queryString>
	<field name="op" class="java.lang.String"/>
	<field name="numeroserie" class="java.lang.String"/>
	<field name="fecharecepcion" class="java.sql.Timestamp"/>
	<field name="fechalaboratorio" class="java.sql.Timestamp"/>
	<field name="nombrecliente" class="java.lang.String"/>
	<field name="fase" class="java.lang.Integer"/>
	<field name="kvasalida" class="java.lang.Double"/>
	<field name="serviciosalida" class="java.lang.String"/>
	<field name="lote" class="java.lang.String"/>
	<variable name="TOTAL_KVA" class="java.lang.Double" resetType="Group" resetGroup="SERVICIO" calculation="Sum">
		<variableExpression><![CDATA[$F{kvasalida}]]></variableExpression>
	</variable>
	<group name="SERVICIO">
		<groupExpression><![CDATA[$F{serviciosalida}]]></groupExpression>
		<groupHeader>
			<band height="25">
				<textField>
					<reportElement x="0" y="0" width="166" height="25" backcolor="#CCCCCC" uuid="743770d7-207c-4309-85b4-31333f688684"/>
					<textElement textAlignment="Left" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{serviciosalida}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="25">
				<textField>
					<reportElement x="0" y="0" width="125" height="25" backcolor="#CCCCCC" uuid="4316455a-a85a-4ae1-91af-479d3db97c42"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{TOTAL_KVA}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<columnHeader>
		<band height="28">
			<staticText>
				<reportElement x="55" y="0" width="70" height="20" uuid="a2c0b92f-4aff-4104-b920-8ddf9402c947"/>
				<text><![CDATA[op]]></text>
			</staticText>
			<staticText>
				<reportElement x="125" y="0" width="60" height="20" uuid="5d5d50f1-8aff-49b7-8f6b-de0075290dc2"/>
				<text><![CDATA[numeroserie]]></text>
			</staticText>
			<staticText>
				<reportElement x="185" y="0" width="64" height="20" uuid="ca5bbac0-9b23-4552-8323-0ad05efaf61a"/>
				<text><![CDATA[fecharecepcion]]></text>
			</staticText>
			<staticText>
				<reportElement x="249" y="0" width="83" height="20" uuid="d4d95040-8ed3-4b1d-ab99-05b3109086d1"/>
				<text><![CDATA[fechalaboratorio]]></text>
			</staticText>
			<staticText>
				<reportElement x="332" y="0" width="83" height="20" uuid="00eaec0a-7171-45ff-b20c-45843c794a70"/>
				<text><![CDATA[nombrecliente]]></text>
			</staticText>
			<staticText>
				<reportElement x="415" y="0" width="83" height="20" uuid="8edf2c9e-0f1e-497c-b5ce-59788b9b17d4"/>
				<text><![CDATA[fase]]></text>
			</staticText>
			<staticText>
				<reportElement x="498" y="0" width="83" height="20" uuid="7c699c81-f01f-4ea9-9742-c1b17dc71897"/>
				<text><![CDATA[kvasalida]]></text>
			</staticText>
			<staticText>
				<reportElement x="581" y="0" width="83" height="20" uuid="ec6a5993-a558-450a-8550-86f3f9c699e2"/>
				<text><![CDATA[serviciosalida]]></text>
			</staticText>
			<staticText>
				<reportElement x="664" y="0" width="83" height="20" uuid="737965f2-42b5-495b-8258-fb6fb151d939"/>
				<text><![CDATA[lote]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="28" splitType="Stretch">
			<textField>
				<reportElement x="55" y="0" width="70" height="20" uuid="f1dd92d0-527e-4204-abae-86204c95e0aa"/>
				<textFieldExpression><![CDATA[$F{op}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="125" y="0" width="60" height="20" uuid="187d60e3-f723-4900-ae34-abb8cba5f7d7"/>
				<textFieldExpression><![CDATA[$F{numeroserie}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="185" y="0" width="64" height="20" uuid="602e9da5-fbb6-464d-a0ac-37bce3bb5d58"/>
				<textFieldExpression><![CDATA[$F{fecharecepcion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="249" y="0" width="83" height="20" uuid="fe1bdb36-6840-4935-9e3e-f0af553f883d"/>
				<textFieldExpression><![CDATA[$F{fechalaboratorio}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="332" y="0" width="83" height="20" uuid="5f0652df-6003-4e85-9f4d-231b64dafe4c"/>
				<textFieldExpression><![CDATA[$F{nombrecliente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="415" y="0" width="83" height="20" uuid="1a3fd8ce-f7b7-43cd-b27d-3b71834f0dbf"/>
				<textFieldExpression><![CDATA[$F{fase}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="498" y="0" width="83" height="20" uuid="951aed5e-d876-4bb6-a0c2-27daa2b5778a"/>
				<textFieldExpression><![CDATA[$F{kvasalida}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="581" y="0" width="83" height="20" uuid="27f6d199-9379-4893-a2d8-bab634483d58"/>
				<textFieldExpression><![CDATA[$F{serviciosalida}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="664" y="0" width="83" height="20" uuid="fcebb4e7-c384-4b5c-bf3f-d7b0fc930723"/>
				<textFieldExpression><![CDATA[$F{lote}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="55" height="20" uuid="47193a56-2e46-4dc3-8acc-565827de76d0"/>
				<textElement textAlignment="Left"/>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
